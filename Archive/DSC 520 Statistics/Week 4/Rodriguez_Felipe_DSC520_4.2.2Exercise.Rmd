---
title: '4.2.2 Exercise'
author: "Felipe Rodriguez"
output: pdf_document
date: "2022-01-07"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Import Libraries
```{r}
setwd('/Users/feliperodriguez/OneDrive - Bellevue University/Github/dsc520/')
library(ggplot2)
library(readxl)
library(plyr)
library(tidyverse)
library(dplyr)
library(scales)
```
## Read in excel doc
```{r}
housing <- read_excel('/Users/feliperodriguez/OneDrive - Bellevue University/Github/dsc520/data/week-7-housing.xlsx')
```

## Use the apply function with a variable in your dataset
```{r}
# Total mean for all houses
sales_price_mean <- apply(housing[c('Sale Price')], 2, mean)
sales_price_mean
```

## Use the aggragate function on a variable in your dataset
```{r}
# Calculates Sale Price mean by Zipcode
aggregate(housing$`Sale Price` ~ zip5, housing, mean)
```

## Use the plyr function on a variable in your dataset â€“ more specifically, I want to see you split some data, perform a modification to the data, and then bring it back together
```{r}
# Produces max salesprice for each zip
max_price_zip <- ddply(housing, ~ zip5, summarize, max_price = max(`Sale Price`))
max_price_zip
# Produces min sale price for each zip
min_price_zip <- ddply(housing, ~ zip5, summarize, min_price = min(`Sale Price`))
min_price_zip
```

## Check the distributions of the data and Indentify any outliers 
```{r}
# Produces a histogram for Sale Price 
housing_hist <- ggplot(housing, aes(`Sale Price`)) + geom_histogram(bins=1250)
housing_hist + scale_x_continuous(labels = comma)
# Produces density ploy for Sale Price
housing_density <- ggplot(housing, aes(`Sale Price`)) + geom_density()
housing_density + scale_x_continuous(labels = comma) + scale_y_continuous(labels=comma)
```

The distribution of Sale Price of the data gives normal tendencies until Sale Price reaches 1.2 million. The majority of homes fall in between 0 and 1.2 million. After that value, the count of homes in that higher price ranges begin to decrease. The outliers that can be seen are above the value of 2 million and represent a small section of the total data.

## Create at least 2 new variables
```{r}
# Creates new variable 'Price Per SQFT' and produces a new merged data set
housing_new <- mutate(housing, price_per_sqft = (`Sale Price`/sq_ft_lot))
# Creates new variable 'SQFT Total Nonliving' and merges it new data set
housing_new <- mutate(housing_new, sq_ft_total_nonliving = (sq_ft_lot-square_feet_total_living))
# Display new variables
head(select(housing_new, price_per_sqft, sq_ft_total_nonliving))
```


