---
title: '5.2 Exercise'
author: "Felipe Rodriguez"
output: pdf_document
date: "2022-01-15"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(readxl)
library(dplyr)
library(purrr)
```


```{r}
setwd('/Users/feliperodriguez/OneDrive - Bellevue University/Github/dsc520/')

housing <- read_excel('/Users/feliperodriguez/OneDrive - Bellevue University/Github/dsc520/data/week-7-housing.xlsx')
```


## Using the dplyr package, use the 6 different operations to analyze/transform the data - GroupBy, Summarize, Mutate, Filter, Select, and Arrange

### Group By

```{r}
housing %>%
  group_by(zip5) %>%
  summarise(mean(`Sale Price`), mean(square_feet_total_living))
```

### Summarize
```{r}
housing %>% summarize(mean(`Sale Price`)) 
```

### Mutate
```{r}
housing_mutate <- housing %>% mutate(sq_ft_price =`Sale Price`/sq_ft_lot)
select(housing_mutate, 'sq_ft_price')
```

### Filter
```{r}
housing %>% filter(zip5 == 98053)
```

### Select
```{r}
select(housing, `Sale Date`, `Sale Price`)
```

### Arrange
```{r}
housing %>% arrange(desc(`Sale Price`))
```

## Using the purrr package â€“ perform 2 functions on your dataset.

### discard
```{r}
discard_purrr <- housing$ctyname %>% discard(is.na)
head(discard_purrr)
```

### has_element
```{r}
housing$ctyname %>% has_element("OMAHA")
```

## Use the cbind and rbind function on your dataset

### cbind
```{r}
cbind_function <- cbind(Sale_Reason=housing$sale_reason, Sale_Price=housing$`Sale Price`)
head(cbind_function)
```

### rbind
```{r}
message("Number of rows before rbind")
nrow(housing)
new_rows <- head(housing, 4)
housing_rbind <-rbind(housing, new_rows)
message("Number of rows after rbind")
nrow(housing_rbind)
```

# Split a string, then concatenate the results back together
```{r}
library(stringr)
date <- str_split(string = housing$`Sale Date`, pattern="-")
date_matrix <- data.frame(Reduce(rbind, date))
names(date_matrix) <- c("Year_Sold", "Month_Sold", "Day_Sold")
head(date_matrix)

new_housing <- cbind(housing, date_matrix)
head(select(new_housing, "Year_Sold", "Month_Sold", "Day_Sold"))
```
